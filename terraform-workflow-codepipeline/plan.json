{"format_version":"0.1","terraform_version":"0.15.1","variables":{"vcs_repo":{"value":{"branch":"main","identifier":"victorbecerragit/helloworld_tf_deploy"}}},"planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.codepipeline.aws_codebuild_project.project[0]","mode":"managed","type":"aws_codebuild_project","name":"project","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"artifacts":[{"artifact_identifier":null,"bucket_owner_access":null,"encryption_disabled":false,"location":null,"name":null,"namespace_type":null,"override_artifact_name":false,"packaging":null,"path":null,"type":"NO_ARTIFACTS"}],"badge_enabled":false,"build_batch_config":[],"build_timeout":60,"cache":[],"concurrent_build_limit":null,"environment":[{"certificate":null,"compute_type":"BUILD_GENERAL1_SMALL","environment_variable":[],"image":"hashicorp/terraform:latest","image_pull_credentials_type":"CODEBUILD","privileged_mode":false,"registry_credential":[],"type":"LINUX_CONTAINER"}],"file_system_locations":[],"logs_config":[],"project_visibility":"PRIVATE","queued_timeout":480,"resource_access_role":null,"secondary_artifacts":[],"secondary_source_version":[],"secondary_sources":[],"source":[{"auth":[],"build_status_config":[],"buildspec":"version: 0.2\nphases:\n  build:\n    commands:\n       - cd $WORKING_DIRECTORY\n       - echo $BACKEND \u003e\u003e backend.tf.json\n       - terraform init \n       - |\n         if [[ \"$CONFIRM_DESTROY\" == \"0\" ]]; then\n           terraform plan\n         else\n           terraform plan -destroy\n         fi\n","git_clone_depth":null,"git_submodules_config":[],"insecure_ssl":null,"location":null,"report_build_status":null,"type":"NO_SOURCE"}],"source_version":null,"tags":null,"vpc_config":[]}},{"address":"module.codepipeline.aws_codebuild_project.project[1]","mode":"managed","type":"aws_codebuild_project","name":"project","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"artifacts":[{"artifact_identifier":null,"bucket_owner_access":null,"encryption_disabled":false,"location":null,"name":null,"namespace_type":null,"override_artifact_name":false,"packaging":null,"path":null,"type":"NO_ARTIFACTS"}],"badge_enabled":false,"build_batch_config":[],"build_timeout":60,"cache":[],"concurrent_build_limit":null,"environment":[{"certificate":null,"compute_type":"BUILD_GENERAL1_SMALL","environment_variable":[],"image":"hashicorp/terraform:latest","image_pull_credentials_type":"CODEBUILD","privileged_mode":false,"registry_credential":[],"type":"LINUX_CONTAINER"}],"file_system_locations":[],"logs_config":[],"project_visibility":"PRIVATE","queued_timeout":480,"resource_access_role":null,"secondary_artifacts":[],"secondary_source_version":[],"secondary_sources":[],"source":[{"auth":[],"build_status_config":[],"buildspec":"version: 0.2\nphases:\n build:\n   commands:\n      - cd $WORKING_DIRECTORY\n      - echo $BACKEND \u003e\u003e backend.tf.json\n      - terraform init\n      - |\n        if [[ \"$CONFIRM_DESTROY\" == \"0\" ]]; then\n          terraform apply -auto-approve\n        else\n          terraform destroy -auto-approve\n        fi\n","git_clone_depth":null,"git_submodules_config":[],"insecure_ssl":null,"location":null,"report_build_status":null,"type":"NO_SOURCE"}],"source_version":null,"tags":null,"vpc_config":[]}},{"address":"module.codepipeline.aws_codepipeline.codepipeline","mode":"managed","type":"aws_codepipeline","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"artifact_store":[{"encryption_key":[],"type":"S3"}],"stage":[{"action":[{"category":"Source","input_artifacts":null,"name":"Source","namespace":null,"output_artifacts":["source_output"],"owner":"AWS","provider":"CodeStarSourceConnection","role_arn":null,"version":"1"}],"name":"Source"},{"action":[{"category":"Build","input_artifacts":["source_output"],"name":"Plan","namespace":null,"output_artifacts":null,"owner":"AWS","provider":"CodeBuild","role_arn":null,"version":"1"}],"name":"Plan"},{"action":[{"category":"Approval","input_artifacts":null,"name":"Approval","namespace":null,"output_artifacts":null,"owner":"AWS","provider":"Manual","role_arn":null,"version":"1"}],"name":"Approval"},{"action":[{"category":"Build","input_artifacts":["source_output"],"name":"Apply","namespace":null,"output_artifacts":null,"owner":"AWS","provider":"CodeBuild","role_arn":null,"version":"1"}],"name":"Apply"}],"tags":null}},{"address":"module.codepipeline.aws_codestarconnections_connection.github","mode":"managed","type":"aws_codestarconnections_connection","name":"github","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"host_arn":null,"provider_type":"GitHub","tags":null}},{"address":"module.codepipeline.aws_iam_role.codebuild","mode":"managed","type":"aws_iam_role","name":"codebuild","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n \"Version\": \"2012-10-17\",\n \"Statement\": [\n   {\n     \"Effect\": \"Allow\",\n     \"Principal\": {\n       \"Service\": \"codebuild.amazonaws.com\"\n     },\n     \"Action\": \"sts:AssumeRole\"\n   }\n ]\n}\n","description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":null}},{"address":"module.codepipeline.aws_iam_role.codepipeline","mode":"managed","type":"aws_iam_role","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n \"Version\": \"2012-10-17\",\n \"Statement\": [\n   {\n     \"Effect\": \"Allow\",\n     \"Principal\": {\n       \"Service\": \"codepipeline.amazonaws.com\"\n     },\n     \"Action\": \"sts:AssumeRole\"\n   }\n ]\n}\n","description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":null}},{"address":"module.codepipeline.aws_iam_role_policy.codebuild","mode":"managed","type":"aws_iam_role_policy","name":"codebuild","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name_prefix":null}},{"address":"module.codepipeline.aws_iam_role_policy.codepipeline","mode":"managed","type":"aws_iam_role_policy","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name_prefix":null}},{"address":"module.codepipeline.aws_iam_role_policy.deploy[0]","mode":"managed","type":"aws_iam_role_policy","name":"deploy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name_prefix":null,"policy":"{\n   \"Version\": \"2012-10-17\",\n   \"Statement\": [\n     {\n       \"Action\": [        \n         \"ec2:DeleteTags\",\n         \"ec2:CreateTags\",\n         \"ec2:TerminateInstances\",\n         \"ec2:RunInstances\",\n         \"ec2:Describe*\"\n         ],\n       \"Effect\": \"Allow\",\n       \"Resource\": \"*\"\n     }\n   ]\n }\n"}},{"address":"module.codepipeline.aws_s3_bucket.codepipeline","mode":"managed","type":"aws_s3_bucket","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"private","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":null,"website":[]}},{"address":"module.codepipeline.aws_sns_topic.codepipeline","mode":"managed","type":"aws_sns_topic","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":null}},{"address":"module.codepipeline.random_string.rand","mode":"managed","type":"random_string","name":"rand","provider_name":"registry.terraform.io/hashicorp/random","schema_version":1,"values":{"keepers":null,"length":24,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"override_special":null,"special":false,"upper":false}}],"address":"module.codepipeline"},{"resources":[{"address":"module.s3backend.aws_dynamodb_table.dynamodb_table","mode":"managed","type":"aws_dynamodb_table","name":"dynamodb_table","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","global_secondary_index":[],"hash_key":"LockID","local_secondary_index":[],"range_key":null,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"stream_enabled":null,"table_class":null,"timeouts":null}},{"address":"module.s3backend.aws_iam_policy.iam_policy","mode":"managed","type":"aws_iam_policy","name":"iam_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name_prefix":null,"path":"/","tags":null}},{"address":"module.s3backend.aws_iam_role.iam_role","mode":"managed","type":"aws_iam_role","name":"iam_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null}},{"address":"module.s3backend.aws_iam_role_policy_attachment.policy_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0},{"address":"module.s3backend.aws_kms_key.kms_key","mode":"managed","type":"aws_kms_key","name":"kms_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"enable_key_rotation":false,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT"}},{"address":"module.s3backend.aws_resourcegroups_group.resourcegroups_group","mode":"managed","type":"aws_resourcegroups_group","name":"resourcegroups_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"resource_query":[{"type":"TAG_FILTERS_1_0"}],"tags":null}},{"address":"module.s3backend.aws_s3_bucket.s3_bucket","mode":"managed","type":"aws_s3_bucket","name":"s3_bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"acl":"private","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":null}]}],"versioning":[{"enabled":true,"mfa_delete":false}],"website":[]}},{"address":"module.s3backend.aws_s3_bucket_public_access_block.s3_bucket","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3_bucket","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true}},{"address":"module.s3backend.data.aws_iam_policy_document.policy_doc","mode":"data","type":"aws_iam_policy_document","name":"policy_doc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:ListBucket"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null},{"actions":["s3:DeleteObject","s3:GetObject","s3:PutObject"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null},{"actions":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null},{"actions":["kms:Decrypt","kms:GenerateDataKey"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null}],"version":null}},{"address":"module.s3backend.random_string.rand","mode":"managed","type":"random_string","name":"rand","provider_name":"registry.terraform.io/hashicorp/random","schema_version":1,"values":{"keepers":null,"length":24,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"override_special":null,"special":false,"upper":false}}],"address":"module.s3backend"}]}},"resource_changes":[{"address":"module.codepipeline.aws_codebuild_project.project[0]","module_address":"module.codepipeline","mode":"managed","type":"aws_codebuild_project","name":"project","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"artifacts":[{"artifact_identifier":null,"bucket_owner_access":null,"encryption_disabled":false,"location":null,"name":null,"namespace_type":null,"override_artifact_name":false,"packaging":null,"path":null,"type":"NO_ARTIFACTS"}],"badge_enabled":false,"build_batch_config":[],"build_timeout":60,"cache":[],"concurrent_build_limit":null,"environment":[{"certificate":null,"compute_type":"BUILD_GENERAL1_SMALL","environment_variable":[],"image":"hashicorp/terraform:latest","image_pull_credentials_type":"CODEBUILD","privileged_mode":false,"registry_credential":[],"type":"LINUX_CONTAINER"}],"file_system_locations":[],"logs_config":[],"project_visibility":"PRIVATE","queued_timeout":480,"resource_access_role":null,"secondary_artifacts":[],"secondary_source_version":[],"secondary_sources":[],"source":[{"auth":[],"build_status_config":[],"buildspec":"version: 0.2\nphases:\n  build:\n    commands:\n       - cd $WORKING_DIRECTORY\n       - echo $BACKEND \u003e\u003e backend.tf.json\n       - terraform init \n       - |\n         if [[ \"$CONFIRM_DESTROY\" == \"0\" ]]; then\n           terraform plan\n         else\n           terraform plan -destroy\n         fi\n","git_clone_depth":null,"git_submodules_config":[],"insecure_ssl":null,"location":null,"report_build_status":null,"type":"NO_SOURCE"}],"source_version":null,"tags":null,"vpc_config":[]},"after_unknown":{"arn":true,"artifacts":[{}],"badge_url":true,"build_batch_config":[],"cache":[],"description":true,"encryption_key":true,"environment":[{"environment_variable":[],"registry_credential":[]}],"file_system_locations":[],"id":true,"logs_config":[],"name":true,"public_project_alias":true,"secondary_artifacts":[],"secondary_source_version":[],"secondary_sources":[],"service_role":true,"source":[{"auth":[],"build_status_config":[],"git_submodules_config":[]}],"tags_all":true,"vpc_config":[]},"before_sensitive":false,"after_sensitive":{"artifacts":[{}],"build_batch_config":[],"cache":[],"environment":[{"environment_variable":[],"registry_credential":[]}],"file_system_locations":[],"logs_config":[],"secondary_artifacts":[],"secondary_source_version":[],"secondary_sources":[],"source":[{"auth":[],"build_status_config":[],"git_submodules_config":[]}],"tags_all":{},"vpc_config":[]}}},{"address":"module.codepipeline.aws_codebuild_project.project[1]","module_address":"module.codepipeline","mode":"managed","type":"aws_codebuild_project","name":"project","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"artifacts":[{"artifact_identifier":null,"bucket_owner_access":null,"encryption_disabled":false,"location":null,"name":null,"namespace_type":null,"override_artifact_name":false,"packaging":null,"path":null,"type":"NO_ARTIFACTS"}],"badge_enabled":false,"build_batch_config":[],"build_timeout":60,"cache":[],"concurrent_build_limit":null,"environment":[{"certificate":null,"compute_type":"BUILD_GENERAL1_SMALL","environment_variable":[],"image":"hashicorp/terraform:latest","image_pull_credentials_type":"CODEBUILD","privileged_mode":false,"registry_credential":[],"type":"LINUX_CONTAINER"}],"file_system_locations":[],"logs_config":[],"project_visibility":"PRIVATE","queued_timeout":480,"resource_access_role":null,"secondary_artifacts":[],"secondary_source_version":[],"secondary_sources":[],"source":[{"auth":[],"build_status_config":[],"buildspec":"version: 0.2\nphases:\n build:\n   commands:\n      - cd $WORKING_DIRECTORY\n      - echo $BACKEND \u003e\u003e backend.tf.json\n      - terraform init\n      - |\n        if [[ \"$CONFIRM_DESTROY\" == \"0\" ]]; then\n          terraform apply -auto-approve\n        else\n          terraform destroy -auto-approve\n        fi\n","git_clone_depth":null,"git_submodules_config":[],"insecure_ssl":null,"location":null,"report_build_status":null,"type":"NO_SOURCE"}],"source_version":null,"tags":null,"vpc_config":[]},"after_unknown":{"arn":true,"artifacts":[{}],"badge_url":true,"build_batch_config":[],"cache":[],"description":true,"encryption_key":true,"environment":[{"environment_variable":[],"registry_credential":[]}],"file_system_locations":[],"id":true,"logs_config":[],"name":true,"public_project_alias":true,"secondary_artifacts":[],"secondary_source_version":[],"secondary_sources":[],"service_role":true,"source":[{"auth":[],"build_status_config":[],"git_submodules_config":[]}],"tags_all":true,"vpc_config":[]},"before_sensitive":false,"after_sensitive":{"artifacts":[{}],"build_batch_config":[],"cache":[],"environment":[{"environment_variable":[],"registry_credential":[]}],"file_system_locations":[],"logs_config":[],"secondary_artifacts":[],"secondary_source_version":[],"secondary_sources":[],"source":[{"auth":[],"build_status_config":[],"git_submodules_config":[]}],"tags_all":{},"vpc_config":[]}}},{"address":"module.codepipeline.aws_codepipeline.codepipeline","module_address":"module.codepipeline","mode":"managed","type":"aws_codepipeline","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"artifact_store":[{"encryption_key":[],"type":"S3"}],"stage":[{"action":[{"category":"Source","input_artifacts":null,"name":"Source","namespace":null,"output_artifacts":["source_output"],"owner":"AWS","provider":"CodeStarSourceConnection","role_arn":null,"version":"1"}],"name":"Source"},{"action":[{"category":"Build","input_artifacts":["source_output"],"name":"Plan","namespace":null,"output_artifacts":null,"owner":"AWS","provider":"CodeBuild","role_arn":null,"version":"1"}],"name":"Plan"},{"action":[{"category":"Approval","input_artifacts":null,"name":"Approval","namespace":null,"output_artifacts":null,"owner":"AWS","provider":"Manual","role_arn":null,"version":"1"}],"name":"Approval"},{"action":[{"category":"Build","input_artifacts":["source_output"],"name":"Apply","namespace":null,"output_artifacts":null,"owner":"AWS","provider":"CodeBuild","role_arn":null,"version":"1"}],"name":"Apply"}],"tags":null},"after_unknown":{"arn":true,"artifact_store":[{"encryption_key":[],"location":true,"region":true}],"id":true,"name":true,"role_arn":true,"stage":[{"action":[{"configuration":true,"output_artifacts":[false],"region":true,"run_order":true}]},{"action":[{"configuration":true,"input_artifacts":[false],"region":true,"run_order":true}]},{"action":[{"configuration":true,"region":true,"run_order":true}]},{"action":[{"configuration":true,"input_artifacts":[false],"region":true,"run_order":true}]}],"tags_all":true},"before_sensitive":false,"after_sensitive":{"artifact_store":[{"encryption_key":[]}],"stage":[{"action":[{"configuration":{},"output_artifacts":[false]}]},{"action":[{"configuration":{},"input_artifacts":[false]}]},{"action":[{"configuration":{}}]},{"action":[{"configuration":{},"input_artifacts":[false]}]}],"tags_all":{}}}},{"address":"module.codepipeline.aws_codestarconnections_connection.github","module_address":"module.codepipeline","mode":"managed","type":"aws_codestarconnections_connection","name":"github","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"host_arn":null,"provider_type":"GitHub","tags":null},"after_unknown":{"arn":true,"connection_status":true,"id":true,"name":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.codepipeline.aws_iam_role.codebuild","module_address":"module.codepipeline","mode":"managed","type":"aws_iam_role","name":"codebuild","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n \"Version\": \"2012-10-17\",\n \"Statement\": [\n   {\n     \"Effect\": \"Allow\",\n     \"Principal\": {\n       \"Service\": \"codebuild.amazonaws.com\"\n     },\n     \"Action\": \"sts:AssumeRole\"\n   }\n ]\n}\n","description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.codepipeline.aws_iam_role.codepipeline","module_address":"module.codepipeline","mode":"managed","type":"aws_iam_role","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n \"Version\": \"2012-10-17\",\n \"Statement\": [\n   {\n     \"Effect\": \"Allow\",\n     \"Principal\": {\n       \"Service\": \"codepipeline.amazonaws.com\"\n     },\n     \"Action\": \"sts:AssumeRole\"\n   }\n ]\n}\n","description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.codepipeline.aws_iam_role_policy.codebuild","module_address":"module.codepipeline","mode":"managed","type":"aws_iam_role_policy","name":"codebuild","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name_prefix":null},"after_unknown":{"id":true,"name":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.codepipeline.aws_iam_role_policy.codepipeline","module_address":"module.codepipeline","mode":"managed","type":"aws_iam_role_policy","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name_prefix":null},"after_unknown":{"id":true,"name":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.codepipeline.aws_iam_role_policy.deploy[0]","module_address":"module.codepipeline","mode":"managed","type":"aws_iam_role_policy","name":"deploy","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name_prefix":null,"policy":"{\n   \"Version\": \"2012-10-17\",\n   \"Statement\": [\n     {\n       \"Action\": [        \n         \"ec2:DeleteTags\",\n         \"ec2:CreateTags\",\n         \"ec2:TerminateInstances\",\n         \"ec2:RunInstances\",\n         \"ec2:Describe*\"\n         ],\n       \"Effect\": \"Allow\",\n       \"Resource\": \"*\"\n     }\n   ]\n }\n"},"after_unknown":{"id":true,"name":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.codepipeline.aws_s3_bucket.codepipeline","module_address":"module.codepipeline","mode":"managed","type":"aws_s3_bucket","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[],"tags":null,"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[],"tags_all":true,"versioning":true,"website":[],"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.codepipeline.aws_sns_topic.codepipeline","module_address":"module.codepipeline","mode":"managed","type":"aws_sns_topic","name":"codepipeline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":null},"after_unknown":{"arn":true,"id":true,"name":true,"name_prefix":true,"owner":true,"policy":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.codepipeline.random_string.rand","module_address":"module.codepipeline","mode":"managed","type":"random_string","name":"rand","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":24,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.s3backend.aws_dynamodb_table.dynamodb_table","module_address":"module.s3backend","mode":"managed","type":"aws_dynamodb_table","name":"dynamodb_table","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"attribute":[{"name":"LockID","type":"S"}],"billing_mode":"PAY_PER_REQUEST","global_secondary_index":[],"hash_key":"LockID","local_secondary_index":[],"range_key":null,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_to_latest_time":null,"stream_enabled":null,"table_class":null,"timeouts":null},"after_unknown":{"arn":true,"attribute":[{}],"global_secondary_index":[],"id":true,"local_secondary_index":[],"name":true,"point_in_time_recovery":true,"read_capacity":true,"replica":[],"server_side_encryption":true,"stream_arn":true,"stream_label":true,"stream_view_type":true,"tags":true,"tags_all":true,"ttl":true,"write_capacity":true},"before_sensitive":false,"after_sensitive":{"attribute":[{}],"global_secondary_index":[],"local_secondary_index":[],"point_in_time_recovery":[],"replica":[],"server_side_encryption":[],"tags":{},"tags_all":{},"ttl":[]}}},{"address":"module.s3backend.aws_iam_policy.iam_policy","module_address":"module.s3backend","mode":"managed","type":"aws_iam_policy","name":"iam_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name_prefix":null,"path":"/","tags":null},"after_unknown":{"arn":true,"id":true,"name":true,"policy":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.s3backend.aws_iam_role.iam_role","module_address":"module.s3backend","mode":"managed","type":"aws_iam_role","name":"iam_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"path":"/","permissions_boundary":null},"after_unknown":{"arn":true,"assume_role_policy":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"name_prefix":true,"tags":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.s3backend.aws_iam_role_policy_attachment.policy_attach","module_address":"module.s3backend","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"policy_arn":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.s3backend.aws_kms_key.kms_key","module_address":"module.s3backend","mode":"managed","type":"aws_kms_key","name":"kms_key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":null,"enable_key_rotation":false,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT"},"after_unknown":{"arn":true,"description":true,"id":true,"key_id":true,"multi_region":true,"policy":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.s3backend.aws_resourcegroups_group.resourcegroups_group","module_address":"module.s3backend","mode":"managed","type":"aws_resourcegroups_group","name":"resourcegroups_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"resource_query":[{"type":"TAG_FILTERS_1_0"}],"tags":null},"after_unknown":{"arn":true,"id":true,"name":true,"resource_query":[{"query":true}],"tags_all":true},"before_sensitive":false,"after_sensitive":{"resource_query":[{}],"tags_all":{}}}},{"address":"module.s3backend.aws_s3_bucket.s3_bucket","module_address":"module.s3backend","mode":"managed","type":"aws_s3_bucket","name":"s3_bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"acl":"private","bucket_prefix":null,"cors_rule":[],"force_destroy":true,"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"policy":null,"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":null}]}],"versioning":[{"enabled":true,"mfa_delete":false}],"website":[]},"after_unknown":{"acceleration_status":true,"arn":true,"bucket":true,"bucket_domain_name":true,"bucket_regional_domain_name":true,"cors_rule":[],"grant":[],"hosted_zone_id":true,"id":true,"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"region":true,"replication_configuration":[],"request_payer":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":true}]}]}],"tags":true,"tags_all":true,"versioning":[{}],"website":[],"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[{}],"website":[]}}},{"address":"module.s3backend.aws_s3_bucket_public_access_block.s3_bucket","module_address":"module.s3backend","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3_bucket","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.s3backend.data.aws_iam_policy_document.policy_doc","module_address":"module.s3backend","mode":"data","type":"aws_iam_policy_document","name":"policy_doc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:ListBucket"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null},{"actions":["s3:DeleteObject","s3:GetObject","s3:PutObject"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null},{"actions":["dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null},{"actions":["kms:Decrypt","kms:GenerateDataKey"],"condition":[],"effect":null,"not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":null}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}}},{"address":"module.s3backend.random_string.rand","module_address":"module.s3backend","mode":"managed","type":"random_string","name":"rand","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":24,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}}],"prior_state":{"format_version":"0.1","terraform_version":"0.15.1","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.s3backend.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"635726785833","arn":"arn:aws:iam::635726785833:user/vittorio","id":"635726785833","user_id":"AIDAIL4ERLXX2XWKSPXWA"}},{"address":"module.s3backend.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US West (Oregon)","endpoint":"ec2.us-west-2.amazonaws.com","id":"us-west-2","name":"us-west-2"}}],"address":"module.s3backend"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","expressions":{"region":{"constant_value":"us-west-2"}}},"module.s3backend:aws":{"name":"aws","version_constraint":"~\u003e 3.28","module_address":"module.s3backend"},"module.s3backend:random":{"name":"random","version_constraint":"~\u003e 3.0","module_address":"module.s3backend"}},"root_module":{"module_calls":{"codepipeline":{"source":"./modules/codepipeline","expressions":{"deployment_policy":{},"environment":{"constant_value":{"CONFIRM_DESTROY":1}},"name":{"constant_value":"terraform-in-action"},"s3_backend_config":{"references":["module.s3backend.config"]},"vcs_repo":{"references":["var.vcs_repo"]}},"module":{"outputs":{"deployment_role_arn":{"expression":{"references":["aws_iam_role.codebuild"]}}},"resources":[{"address":"aws_codebuild_project.project","mode":"managed","type":"aws_codebuild_project","name":"project","provider_config_key":"codepipeline:aws","expressions":{"artifacts":[{"type":{"constant_value":"NO_ARTIFACTS"}}],"environment":[{"compute_type":{"constant_value":"BUILD_GENERAL1_SMALL"},"image":{"references":["var.terraform_version"]},"type":{"constant_value":"LINUX_CONTAINER"}}],"name":{"references":["local.namespace","local.projects","count.index"]},"service_role":{"references":["aws_iam_role.codebuild"]},"source":[{"buildspec":{"references":["path.module","local.projects","count.index"]},"type":{"constant_value":"NO_SOURCE"}}]},"schema_version":0,"count_expression":{"references":["local.projects"]}},{"address":"aws_codepipeline.codepipeline","mode":"managed","type":"aws_codepipeline","name":"codepipeline","provider_config_key":"codepipeline:aws","expressions":{"artifact_store":[{"location":{"references":["aws_s3_bucket.codepipeline"]},"type":{"constant_value":"S3"}}],"name":{"references":["local.namespace"]},"role_arn":{"references":["aws_iam_role.codepipeline"]},"stage":[{"action":[{"category":{"constant_value":"Source"},"configuration":{"references":["var.vcs_repo","var.vcs_repo","aws_codestarconnections_connection.github"]},"name":{"constant_value":"Source"},"output_artifacts":{"constant_value":["source_output"]},"owner":{"constant_value":"AWS"},"provider":{"constant_value":"CodeStarSourceConnection"},"version":{"constant_value":"1"}}],"name":{"constant_value":"Source"}},{"action":[{"category":{"constant_value":"Build"},"configuration":{"references":["aws_codebuild_project.project[0]","local.environment"]},"input_artifacts":{"constant_value":["source_output"]},"name":{"constant_value":"Plan"},"owner":{"constant_value":"AWS"},"provider":{"constant_value":"CodeBuild"},"version":{"constant_value":"1"}}],"name":{"constant_value":"Plan"}},{"action":[{"category":{"constant_value":"Build"},"configuration":{"references":["aws_codebuild_project.project[1]","local.environment"]},"input_artifacts":{"constant_value":["source_output"]},"name":{"constant_value":"Apply"},"owner":{"constant_value":"AWS"},"provider":{"constant_value":"CodeBuild"},"version":{"constant_value":"1"}}],"name":{"constant_value":"Apply"}}]},"schema_version":0},{"address":"aws_codestarconnections_connection.github","mode":"managed","type":"aws_codestarconnections_connection","name":"github","provider_config_key":"codepipeline:aws","expressions":{"name":{"references":["local.namespace"]},"provider_type":{"constant_value":"GitHub"}},"schema_version":0},{"address":"aws_iam_role.codebuild","mode":"managed","type":"aws_iam_role","name":"codebuild","provider_config_key":"codepipeline:aws","expressions":{"assume_role_policy":{"constant_value":"{\n \"Version\": \"2012-10-17\",\n \"Statement\": [\n   {\n     \"Effect\": \"Allow\",\n     \"Principal\": {\n       \"Service\": \"codebuild.amazonaws.com\"\n     },\n     \"Action\": \"sts:AssumeRole\"\n   }\n ]\n}\n"},"name":{"references":["local.namespace"]}},"schema_version":0},{"address":"aws_iam_role.codepipeline","mode":"managed","type":"aws_iam_role","name":"codepipeline","provider_config_key":"codepipeline:aws","expressions":{"assume_role_policy":{"constant_value":"{\n \"Version\": \"2012-10-17\",\n \"Statement\": [\n   {\n     \"Effect\": \"Allow\",\n     \"Principal\": {\n       \"Service\": \"codepipeline.amazonaws.com\"\n     },\n     \"Action\": \"sts:AssumeRole\"\n   }\n ]\n}\n"},"name":{"references":["local.namespace"]}},"schema_version":0},{"address":"aws_iam_role_policy.codebuild","mode":"managed","type":"aws_iam_role_policy","name":"codebuild","provider_config_key":"codepipeline:aws","expressions":{"policy":{"references":["aws_s3_bucket.codepipeline","aws_s3_bucket.codepipeline"]},"role":{"references":["aws_iam_role.codebuild"]}},"schema_version":0},{"address":"aws_iam_role_policy.codepipeline","mode":"managed","type":"aws_iam_role_policy","name":"codepipeline","provider_config_key":"codepipeline:aws","expressions":{"policy":{"references":["aws_s3_bucket.codepipeline","aws_s3_bucket.codepipeline","aws_sns_topic.codepipeline","aws_codestarconnections_connection.github"]},"role":{"references":["aws_iam_role.codepipeline"]}},"schema_version":0},{"address":"aws_iam_role_policy.deploy","mode":"managed","type":"aws_iam_role_policy","name":"deploy","provider_config_key":"codepipeline:aws","expressions":{"policy":{"references":["var.deployment_policy"]},"role":{"references":["aws_iam_role.codebuild"]}},"schema_version":0,"count_expression":{"references":["var.deployment_policy"]}},{"address":"aws_s3_bucket.codepipeline","mode":"managed","type":"aws_s3_bucket","name":"codepipeline","provider_config_key":"codepipeline:aws","expressions":{"acl":{"constant_value":"private"},"bucket":{"references":["local.namespace"]},"force_destroy":{"constant_value":true}},"schema_version":0},{"address":"aws_sns_topic.codepipeline","mode":"managed","type":"aws_sns_topic","name":"codepipeline","provider_config_key":"codepipeline:aws","expressions":{"name":{"references":["local.namespace"]}},"schema_version":0},{"address":"random_string.rand","mode":"managed","type":"random_string","name":"rand","provider_config_key":"codepipeline:random","expressions":{"length":{"constant_value":24},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":1}],"variables":{"auto_apply":{"default":false,"description":"Whether to automatically apply changes when a Terraform plan is successful. Defaults to false."},"deployment_policy":{"default":null,"description":"An optional IAM deployment policy"},"environment":{"default":{},"description":"A map of environment variables to pass into pipeline"},"name":{"default":"terraform","description":"A project name to use for resource mapping"},"s3_backend_config":{"description":"Settings for configuring the S3 remote backend"},"terraform_version":{"default":"latest","description":"The version of Terraform to use for this workspace. Defaults to the latest available version."},"vcs_repo":{"description":"Settings for the workspace's VCS repository."},"working_directory":{"default":".","description":"A relative path that Terraform will execute within. Defaults to the root of your repository."}}}},"s3backend":{"source":"terraform-in-action/s3backend/aws","expressions":{"principal_arns":{"references":["module.codepipeline.deployment_role_arn"]}},"module":{"outputs":{"config":{"expression":{"references":["aws_s3_bucket.s3_bucket","data.aws_region.current","aws_iam_role.iam_role","aws_dynamodb_table.dynamodb_table"]}}},"resources":[{"address":"aws_dynamodb_table.dynamodb_table","mode":"managed","type":"aws_dynamodb_table","name":"dynamodb_table","provider_config_key":"s3backend:aws","expressions":{"attribute":[{"name":{"constant_value":"LockID"},"type":{"constant_value":"S"}}],"billing_mode":{"constant_value":"PAY_PER_REQUEST"},"hash_key":{"constant_value":"LockID"},"name":{"references":["local.namespace"]},"tags":{"references":["local.namespace"]}},"schema_version":1},{"address":"aws_iam_policy.iam_policy","mode":"managed","type":"aws_iam_policy","name":"iam_policy","provider_config_key":"s3backend:aws","expressions":{"name":{"references":["local.namespace"]},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.policy_doc"]}},"schema_version":0},{"address":"aws_iam_role.iam_role","mode":"managed","type":"aws_iam_role","name":"iam_role","provider_config_key":"s3backend:aws","expressions":{"assume_role_policy":{"references":["local.principal_arns"]},"name":{"references":["local.namespace"]},"tags":{"references":["local.namespace"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.policy_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"policy_attach","provider_config_key":"s3backend:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.iam_policy"]},"role":{"references":["aws_iam_role.iam_role"]}},"schema_version":0},{"address":"aws_kms_key.kms_key","mode":"managed","type":"aws_kms_key","name":"kms_key","provider_config_key":"s3backend:aws","expressions":{"tags":{"references":["local.namespace"]}},"schema_version":0},{"address":"aws_resourcegroups_group.resourcegroups_group","mode":"managed","type":"aws_resourcegroups_group","name":"resourcegroups_group","provider_config_key":"s3backend:aws","expressions":{"name":{"references":["local.namespace"]},"resource_query":[{"query":{"references":["local.namespace"]}}]},"schema_version":0},{"address":"aws_s3_bucket.s3_bucket","mode":"managed","type":"aws_s3_bucket","name":"s3_bucket","provider_config_key":"s3backend:aws","expressions":{"bucket":{"references":["local.namespace"]},"force_destroy":{"references":["var.force_destroy_state"]},"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.kms_key"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]}],"tags":{"references":["local.namespace"]},"versioning":[{"enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.s3_bucket","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"s3_bucket","provider_config_key":"s3backend:aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.s3_bucket"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"random_string.rand","mode":"managed","type":"random_string","name":"rand","provider_config_key":"s3backend:random","expressions":{"length":{"constant_value":24},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":1},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"s3backend:aws","schema_version":0},{"address":"data.aws_iam_policy_document.policy_doc","mode":"data","type":"aws_iam_policy_document","name":"policy_doc","provider_config_key":"s3backend:aws","expressions":{"statement":[{"actions":{"constant_value":["s3:ListBucket"]},"resources":{"references":["aws_s3_bucket.s3_bucket"]}},{"actions":{"constant_value":["s3:GetObject","s3:PutObject","s3:DeleteObject"]},"resources":{"references":["aws_s3_bucket.s3_bucket"]}},{"actions":{"constant_value":["dynamodb:GetItem","dynamodb:PutItem","dynamodb:DeleteItem"]},"resources":{"references":["aws_dynamodb_table.dynamodb_table"]}},{"actions":{"constant_value":["kms:Decrypt","kms:GenerateDataKey"]},"resources":{"references":["aws_kms_key.kms_key"]}}]},"schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"s3backend:aws","schema_version":0}],"variables":{"force_destroy_state":{"default":true,"description":"Force destroy the s3 bucket containing state files?"},"namespace":{"default":"s3backend","description":"The project namespace to use for unique resource naming"},"principal_arns":{"default":null,"description":"A list of principal arns allowed to assume the IAM role"}}}}},"variables":{"vcs_repo":{}}}}}
